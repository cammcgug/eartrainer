<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Ear Training Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root{
      --bg:#0e1118;
      --card:#161b2a;
      --card2:#1e2440;
      --muted:#9aa4b2;
      --text:#e8ecf2;
      --btn:#273050;
      --btnHover:#313c63;
      --good:#1f4d3a;
      --bad:#4d1f2a;
      --radius:16px;
      --shadow:0 20px 40px rgba(0,0,0,.4);
      --font: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family:var(--font);
      display:flex;
      justify-content:center;
      min-height:100vh;
      padding:24px;
    }
    .app{
      width:900px;
      max-width:100%;
    }
    .card{
      background:var(--card);
      border-radius:var(--radius);
      padding:20px;
      box-shadow:var(--shadow);
    }
    h1{ margin:0 0 6px; font-size:22px; }
    .sub{ margin:0 0 16px; color:var(--muted); font-size:14px; }

    .hidden{ display:none !important; }

    /* Menu */
    .menuGrid{
      display:grid;
      grid-template-columns:repeat(3, 1fr);
      gap:12px;
      margin-top:12px;
    }
    @media(max-width:800px){
      .menuGrid{ grid-template-columns:1fr; }
    }
    .menuBtn{
      text-align:left;
      border:none;
      background:var(--card2);
      color:var(--text);
      padding:16px;
      border-radius:14px;
      cursor:pointer;
      transition:background .12s ease, transform .06s ease;
      box-shadow:0 8px 18px rgba(0,0,0,.25);
    }
    .menuBtn:hover{ background:#252d52; }
    .menuBtn:active{ transform:scale(.99); }
    .menuTitle{ font-weight:800; font-size:16px; margin-bottom:6px; }
    .menuDesc{ color:var(--muted); font-size:13px; line-height:1.35; }

    /* Frequency Trainer UI */
    .top{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      flex-wrap:wrap;
      gap:10px;
    }
    .stats{
      display:flex;
      gap:10px;
      font-size:13px;
      color:var(--muted);
      flex-wrap:wrap;
      align-items:center;
    }
    .pill{
      background:#222840;
      padding:6px 10px;
      border-radius:999px;
    }
    .controls{
      margin-top:14px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }
    button.action{
      background:var(--btn);
      border:none;
      color:#fff;
      padding:10px 14px;
      border-radius:10px;
      cursor:pointer;
      font-weight:700;
    }
    button.action:hover{ background:var(--btnHover); }
    button.action:disabled{ opacity:.45; cursor:not-allowed; }
    .answers{
      margin-top:18px;
      display:grid;
      grid-template-columns:repeat(2,1fr);
      gap:10px;
    }
    @media(max-width:600px){
      .answers{ grid-template-columns:1fr; }
    }
    .answer{
      background:var(--card2);
      border-radius:10px;
      padding:12px;
      border:none;
      color:var(--text);
      cursor:pointer;
      font-weight:700;
      text-align:left;
    }
    .answer:hover{ background:#252d52; }
    .answer:disabled{ opacity:.9; cursor:not-allowed; }
    .answer.correct{ background:var(--good) !important; }
    .answer.wrong{ background:var(--bad) !important; }
    .feedback{
      margin-top:14px;
      min-height:22px;
      font-size:14px;
      color:#cfd6e4;
    }

    .backRow{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      margin-top:14px;
      border-top:1px solid rgba(255,255,255,.08);
      padding-top:14px;
    }
    .smallNote{ color:var(--muted); font-size:12px; line-height:1.35; }
  </style>
</head>

<body>
<div class="app">

  <!-- =========================
       FRONT PAGE / MENU
  ========================== -->
  <div class="card" id="view-menu">
    <h1>Ear Training Hub</h1>
    <p class="sub">Choose a training section.</p>

    <div class="menuGrid">
      <button class="menuBtn" id="go-frequency">
        <div class="menuTitle">Frequency Training</div>
        <div class="menuDesc">Identify pure tones (e.g., 250 Hz, 1 kHz, 5 kHz). Multiple choice with scoring.</div>
      </button>

      <button class="menuBtn" id="go-interval">
        <div class="menuTitle">Interval Training</div>
        <div class="menuDesc">Coming next: recognize musical intervals by ear (m2, M2, m3, M3, etc.).</div>
      </button>

      <button class="menuBtn" id="go-section3">
        <div class="menuTitle">Section 3 (TBD)</div>
        <div class="menuDesc">Placeholder. We can turn this into EQ boosts/cuts, chord quality, rhythm, etc.</div>
      </button>
    </div>

    <div class="backRow">
      <div class="smallNote">
        Folder setup: <b>index.html</b> + <b>audio/</b> (your mp3s).
      </div>
    </div>
  </div>

  <!-- =========================
       FREQUENCY TRAINING
  ========================== -->
  <div class="card hidden" id="view-frequency">
    <div class="top">
      <div>
        <h1>Frequency Training</h1>
        <p class="sub">Press Play, then choose the correct frequency.</p>
      </div>
      <div class="stats">
        <div class="pill">Score: <span id="score">0</span></div>
        <div class="pill">Question: <span id="qnum">1</span>/30</div>
        <div class="pill">Accuracy: <span id="acc">0%</span></div>
      </div>
    </div>

    <div class="controls">
      <button class="action" id="play">‚ñ∂ Play</button>
      <button class="action" id="replay" disabled>‚Üª Replay</button>
      <button class="action" id="next" disabled>Next ‚Üí</button>
      <button class="action" id="reset" style="margin-left:auto;">Reset</button>
    </div>

    <div class="answers" id="answers"></div>
    <div class="feedback" id="feedback"></div>

    <div class="backRow">
      <button class="action" id="backFromFrequency">‚Üê Back to Menu</button>
      <div class="smallNote">
        Tip: let students replay before answering. We can add difficulty modes next.
      </div>
    </div>
  </div>

  <!-- =========================
       INTERVAL TRAINING (PLACEHOLDER)
  ========================== -->
  <div class="card hidden" id="view-interval">
    <h1>Interval Training</h1>
    <p class="sub">Placeholder screen. Next we‚Äôll build the actual interval trainer here.</p>

    <div class="smallNote">
      Ideas for how we can implement it:
      <ul>
        <li>Choose ‚Äúascending / descending / harmonic‚Äù</li>
        <li>Select a root note range (C3‚ÄìC4 etc.)</li>
        <li>Random interval playback + multiple choice</li>
        <li>Optional reference melodies (toggle on/off)</li>
      </ul>
    </div>

    <div class="backRow">
      <button class="action" id="backFromInterval">‚Üê Back to Menu</button>
      <div class="smallNote">Tell me what intervals you want (e.g., m2‚ÄìP8) and if you want melodic references.</div>
    </div>
  </div>

  <!-- =========================
       SECTION 3 (PLACEHOLDER)
  ========================== -->
  <div class="card hidden" id="view-section3">
    <h1>Section 3 (TBD)</h1>
    <p class="sub">Placeholder screen. Rename and build this section whenever you‚Äôre ready.</p>

    <div class="smallNote">
      Popular options for audio students:
      <ul>
        <li>EQ Training: ‚ÄúWhich band is boosted?‚Äù (pink noise + boost)</li>
        <li>Compression Detection: ‚ÄúWhich file is more compressed?‚Äù</li>
        <li>Chord Quality: major/minor/diminished/aug</li>
        <li>Rhythm / Groove timing tests</li>
      </ul>
    </div>

    <div class="backRow">
      <button class="action" id="backFromSection3">‚Üê Back to Menu</button>
      <div class="smallNote">If you tell me what you want here, I‚Äôll wire it up next.</div>
    </div>
  </div>

</div>

<audio id="player"></audio>

<script>
/* =====================================================
   SIMPLE VIEW ROUTER
===================================================== */
const views = {
  menu: document.getElementById("view-menu"),
  frequency: document.getElementById("view-frequency"),
  interval: document.getElementById("view-interval"),
  section3: document.getElementById("view-section3")
};

function showView(name){
  Object.values(views).forEach(v => v.classList.add("hidden"));
  views[name].classList.remove("hidden");
}

/* Menu buttons */
document.getElementById("go-frequency").onclick = () => showView("frequency");
document.getElementById("go-interval").onclick = () => showView("interval");
document.getElementById("go-section3").onclick = () => showView("section3");

/* Back buttons */
document.getElementById("backFromFrequency").onclick = () => showView("menu");
document.getElementById("backFromInterval").onclick = () => showView("menu");
document.getElementById("backFromSection3").onclick = () => showView("menu");

/* =====================================================
   FREQUENCY TRAINER
===================================================== */

/* Your mapped files (no renaming needed) */
const FILES = [
  { label:"80 Hz", file:"audio/1..mp3" },
  { label:"100 Hz", file:"audio/2_.mp3" },
  { label:"125 Hz", file:"audio/3..mp3" },
  { label:"250 Hz", file:"audio/4..mp3" },
  { label:"315 Hz", file:"audio/5..mp3" },
  { label:"400 Hz", file:"audio/6..mp3" },
  { label:"500 Hz", file:"audio/7_.mp3" },
  { label:"630 Hz", file:"audio/8..mp3" },
  { label:"800 Hz", file:"audio/9..mp3" },
  { label:"1 kHz", file:"audio/10_.mp3" },
  { label:"2 kHz", file:"audio/11_.mp3" },
  { label:"2.5 kHz", file:"audio/12..mp3" },
  { label:"3.15 kHz", file:"audio/13..mp3" },
  { label:"4 kHz", file:"audio/14..mp3" },
  { label:"5 kHz", file:"audio/15_.mp3" },
  { label:"6.3 kHz", file:"audio/16..mp3" },
  { label:"8 kHz", file:"audio/17..mp3" },
  { label:"10 kHz", file:"audio/18_.mp3" },
  { label:"12 kHz", file:"audio/19_.mp3" },
  { label:"14 kHz", file:"audio/20..mp3" },
  { label:"1 kHz", file:"audio/21_.mp3" },
  { label:"250 Hz", file:"audio/22..mp3" },
  { label:"500 Hz", file:"audio/23_.mp3" },
  { label:"2.15 kHz", file:"audio/24..mp3" },
  { label:"5 kHz", file:"audio/25_.mp3" },
  { label:"10 kHz", file:"audio/26_.mp3" },
  { label:"630 Hz", file:"audio/27..mp3" },
  { label:"125 Hz", file:"audio/28..mp3" },
  { label:"60 Hz", file:"audio/29_.mp3" },
  { label:"10 kHz", file:"audio/30_.mp3" }
];

const ANSWERS_PER_Q = 5;
let pool = [];
let current = null;
let locked = false;

let score = 0;
let answered = 0;
let correct = 0;

const player = document.getElementById("player");
const answersEl = document.getElementById("answers");
const feedbackEl = document.getElementById("feedback");

const scoreEl = document.getElementById("score");
const qnumEl = document.getElementById("qnum");
const accEl = document.getElementById("acc");

function shuffle(a){
  return a.slice().sort(() => Math.random() - 0.5);
}

function refillPool(){
  if(pool.length === 0) pool = shuffle(FILES);
}

function updateStats(){
  scoreEl.textContent = String(score);
  qnumEl.textContent = String(Math.min(answered + 1, FILES.length));
  const pct = answered === 0 ? 0 : Math.round((correct/answered)*100);
  accEl.textContent = pct + "%";
}

function newQuestion(){
  locked = false;
  feedbackEl.textContent = "";
  document.getElementById("next").disabled = true;
  document.getElementById("replay").disabled = true;

  refillPool();
  current = pool.pop();

  const decoys = shuffle(FILES.filter(f => f !== current)).slice(0, ANSWERS_PER_Q - 1);
  const options = shuffle([current, ...decoys]);

  answersEl.innerHTML = "";
  options.forEach(item => {
    const b = document.createElement("button");
    b.className = "answer";
    b.textContent = item.label;
    b.onclick = () => selectAnswer(b, item);
    answersEl.appendChild(b);
  });

  updateStats();
}

function selectAnswer(btn, item){
  if(locked) return;
  locked = true;
  answered++;

  const buttons = document.querySelectorAll(".answer");
  buttons.forEach(b => b.disabled = true);

  if(item === current){
    score++; correct++;
    btn.classList.add("correct");
    feedbackEl.innerHTML = `‚úÖ Correct ‚Äî <b>${current.label}</b>`;
  } else {
    btn.classList.add("wrong");
    feedbackEl.innerHTML = `‚ùå Incorrect ‚Äî Correct answer was <b>${current.label}</b>`;
    buttons.forEach(b => {
      if(b.textContent === current.label) b.classList.add("correct");
    });
  }

  updateStats();
  document.getElementById("next").disabled = false;
}

/* Controls */
document.getElementById("play").onclick = () => {
  if(!current) newQuestion();
  player.src = current.file;
  player.play();
  document.getElementById("replay").disabled = false;
};

document.getElementById("replay").onclick = () => {
  player.currentTime = 0;
  player.play();
};

document.getElementById("next").onclick = () => {
  if(answered >= FILES.length){
    feedbackEl.innerHTML = `üéâ Finished! Final Score: <b>${score}/${FILES.length}</b>`;
    document.getElementById("next").disabled = true;
    return;
  }
  newQuestion();
};

document.getElementById("reset").onclick = () => {
  score = 0; answered = 0; correct = 0;
  pool = [];
  updateStats();
  newQuestion();
};

/* Start app on menu, prep first frequency question so it's ready */
showView("menu");
newQuestion();
</script>

</body>
</html>
