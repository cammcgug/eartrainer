<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Frequency Ear Training</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    body{
      margin:0;
      background:#0e1118;
      color:#e8ecf2;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      display:flex;
      justify-content:center;
      align-items:center;
      min-height:100vh;
    }
    .app{
      width:800px;
      max-width:95%;
      background:#161b2a;
      border-radius:16px;
      padding:20px;
      box-shadow:0 20px 40px rgba(0,0,0,.4);
    }
    h1{
      margin:0 0 6px;
      font-size:22px;
    }
    .sub{
      font-size:14px;
      color:#9aa4b2;
      margin-bottom:16px;
    }
    .top{
      display:flex;
      justify-content:space-between;
      align-items:center;
      flex-wrap:wrap;
      gap:10px;
    }
    .stats{
      display:flex;
      gap:10px;
      font-size:13px;
      color:#9aa4b2;
    }
    .pill{
      background:#222840;
      padding:6px 10px;
      border-radius:999px;
    }
    .controls{
      margin-top:14px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    button{
      background:#273050;
      border:none;
      color:#fff;
      padding:10px 14px;
      border-radius:10px;
      cursor:pointer;
      font-weight:600;
    }
    button:hover{ background:#313c63; }
    button:disabled{ opacity:.45; cursor:not-allowed; }

    .answers{
      margin-top:18px;
      display:grid;
      grid-template-columns:repeat(2,1fr);
      gap:10px;
    }
    @media(max-width:600px){
      .answers{ grid-template-columns:1fr; }
    }
    .answer{
      background:#1e2440;
      border-radius:10px;
      padding:12px;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }
    .answer.correct{ background:#1f4d3a; }
    .answer.wrong{ background:#4d1f2a; }

    .feedback{
      margin-top:14px;
      min-height:22px;
      font-size:14px;
      color:#cfd6e4;
    }
  </style>
</head>

<body>
<div class="app">
  <div class="top">
    <div>
      <h1>Frequency Ear Training</h1>
      <div class="sub">Listen and identify the frequency</div>
    </div>
    <div class="stats">
      <div class="pill">Score: <span id="score">0</span></div>
      <div class="pill">Question: <span id="qnum">1</span>/30</div>
      <div class="pill">Accuracy: <span id="acc">0%</span></div>
    </div>
  </div>

  <div class="controls">
    <button id="play">‚ñ∂ Play</button>
    <button id="replay" disabled>‚Üª Replay</button>
    <button id="next" disabled>Next ‚Üí</button>
    <button id="reset" style="margin-left:auto;">Reset</button>
  </div>

  <div class="answers" id="answers"></div>
  <div class="feedback" id="feedback"></div>
</div>

<audio id="player"></audio>

<script>
/* =====================================================
   AUDIO FILE MAP (DO NOT RENAME FILES)
===================================================== */

const FILES = [
  { label:"80 Hz", file:"audio/1..mp3" },
  { label:"100 Hz", file:"audio/2_.mp3" },
  { label:"125 Hz", file:"audio/3..mp3" },
  { label:"250 Hz", file:"audio/4..mp3" },
  { label:"315 Hz", file:"audio/5..mp3" },
  { label:"400 Hz", file:"audio/6..mp3" },
  { label:"500 Hz", file:"audio/7_.mp3" },
  { label:"630 Hz", file:"audio/8..mp3" },
  { label:"800 Hz", file:"audio/9..mp3" },
  { label:"1 kHz", file:"audio/10_.mp3" },
  { label:"2 kHz", file:"audio/11_.mp3" },
  { label:"2.5 kHz", file:"audio/12..mp3" },
  { label:"3.15 kHz", file:"audio/13..mp3" },
  { label:"4 kHz", file:"audio/14..mp3" },
  { label:"5 kHz", file:"audio/15_.mp3" },
  { label:"6.3 kHz", file:"audio/16..mp3" },
  { label:"8 kHz", file:"audio/17..mp3" },
  { label:"10 kHz", file:"audio/18_.mp3" },
  { label:"12 kHz", file:"audio/19_.mp3" },
  { label:"14 kHz", file:"audio/20..mp3" },
  { label:"1 kHz", file:"audio/21_.mp3" },
  { label:"250 Hz", file:"audio/22..mp3" },
  { label:"500 Hz", file:"audio/23_.mp3" },
  { label:"2.15 kHz", file:"audio/24..mp3" },
  { label:"5 kHz", file:"audio/25_.mp3" },
  { label:"10 kHz", file:"audio/26_.mp3" },
  { label:"630 Hz", file:"audio/27..mp3" },
  { label:"125 Hz", file:"audio/28..mp3" },
  { label:"60 Hz", file:"audio/29_.mp3" },
  { label:"10 kHz", file:"audio/30_.mp3" }
];

/* =====================================================
   GAME LOGIC
===================================================== */

const ANSWERS_PER_Q = 5;
let pool = [];
let current = null;
let locked = false;

let score = 0;
let answered = 0;
let correct = 0;

const player = document.getElementById("player");
const answersEl = document.getElementById("answers");
const feedbackEl = document.getElementById("feedback");

const scoreEl = document.getElementById("score");
const qnumEl = document.getElementById("qnum");
const accEl = document.getElementById("acc");

function shuffle(a){
  return a.slice().sort(()=>Math.random()-0.5);
}

function refillPool(){
  if(pool.length === 0) pool = shuffle(FILES);
}

function newQuestion(){
  locked = false;
  feedbackEl.textContent = "";
  document.getElementById("next").disabled = true;
  document.getElementById("replay").disabled = true;

  refillPool();
  const correctItem = pool.pop();
  const decoys = shuffle(FILES.filter(f => f !== correctItem)).slice(0, ANSWERS_PER_Q-1);
  const answers = shuffle([correctItem, ...decoys]);

  current = correctItem;
  answersEl.innerHTML = "";

  answers.forEach(item=>{
    const b = document.createElement("button");
    b.className = "answer";
    b.textContent = item.label;
    b.onclick = ()=>selectAnswer(b, item);
    answersEl.appendChild(b);
  });

  qnumEl.textContent = answered + 1;
}

function selectAnswer(btn, item){
  if(locked) return;
  locked = true;
  answered++;

  const buttons = document.querySelectorAll(".answer");
  buttons.forEach(b=>b.disabled=true);

  if(item === current){
    score++; correct++;
    btn.classList.add("correct");
    feedbackEl.innerHTML = `‚úÖ Correct ‚Äî <b>${current.label}</b>`;
  }else{
    btn.classList.add("wrong");
    feedbackEl.innerHTML = `‚ùå Incorrect ‚Äî Correct answer was <b>${current.label}</b>`;
    buttons.forEach(b=>{
      if(b.textContent === current.label) b.classList.add("correct");
    });
  }

  scoreEl.textContent = score;
  accEl.textContent = Math.round((correct/answered)*100) + "%";
  document.getElementById("next").disabled = false;
}

document.getElementById("play").onclick = ()=>{
  player.src = current.file;
  player.play();
  document.getElementById("replay").disabled = false;
};

document.getElementById("replay").onclick = ()=>{
  player.currentTime = 0;
  player.play();
};

document.getElementById("next").onclick = ()=>{
  if(answered >= FILES.length){
    feedbackEl.innerHTML = `üéâ Finished! Final Score: <b>${score}/${FILES.length}</b>`;
    return;
  }
  newQuestion();
};

document.getElementById("reset").onclick = ()=>{
  score = answered = correct = 0;
  pool = [];
  scoreEl.textContent = 0;
  accEl.textContent = "0%";
  newQuestion();
};

newQuestion();
</script>
</body>
</html>
